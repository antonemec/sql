<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–æ–∑–ø–æ–¥—ñ–ª –¥–∑–≤—ñ–Ω–∫—ñ–≤ –∑–∞ SQL - –ù–∞–≤—á–∞–ª—å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.2em;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .section:hover {
            transform: translateY(-5px);
        }

        .section h2 {
            color: #2c3e50;
            font-size: 1.8em;
            margin-bottom: 20px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .algorithm-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .step {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .step:hover {
            transform: scale(1.05);
        }

        .step-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .visualization {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #3498db;
        }

        .client-table, .employee-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .client-table th, .employee-table th {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px;
            text-align: left;
        }

        .client-table td, .employee-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }

        .client-table tr:hover, .employee-table tr:hover {
            background: #f8f9fa;
        }

        .balance-bar {
            height: 30px;
            background: linear-gradient(90deg, #00b894, #fdcb6e);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin: 5px 0;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .highlight {
            background: rgba(52, 152, 219, 0.1);
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            margin: 15px 0;
        }

        .interactive-demo {
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .demo-controls {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .demo-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .formula {
            background: linear-gradient(135deg, #ffecd2, #fcb69f);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .algorithm-steps {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ –†–æ–∑–ø–æ–¥—ñ–ª –¥–∑–≤—ñ–Ω–∫—ñ–≤ –∑–∞ SQL</h1>
            <p>–ù–∞–≤—á–∞–ª—å–Ω–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –ø–æ —Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω–æ–º—É —Ä–æ–∑–ø–æ–¥—ñ–ª—É –∫–ª—ñ—î–Ω—Ç—ñ–≤ –º—ñ–∂ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞–º–∏</p>
        </div>

        <div class="section">
            <h2>üìã –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–¥–∞—á—ñ</h2>
            <p>–ù–µ–æ–±—Ö—ñ–¥–Ω–æ —Ä–æ–∑–ø–æ–¥—ñ–ª–∏—Ç–∏ –∫–ª—ñ—î–Ω—Ç—ñ–≤ –º—ñ–∂ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞–º–∏ —Ç–∞–∫, —â–æ–±:</p>
            <ul style="margin: 15px 0 15px 30px;">
                <li>–ö–æ–∂–Ω–∏–π —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫ –æ—Ç—Ä–∏–º–∞–≤ –º–∞–∫—Å–∏–º—É–º 20 –¥–∑–≤—ñ–Ω–∫—ñ–≤ –Ω–∞ —Ç–∏–∂–¥–µ–Ω—å</li>
                <li>–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –ª—ñ–º—ñ—Ç—ñ–≤ –±—É–ª–∞ —Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω–æ —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–∞</li>
                <li>–ú—ñ–Ω—ñ–º—ñ–∑—É–≤–∞—Ç–∏ –≤—ñ–¥—Ö–∏–ª–µ–Ω–Ω—è –º—ñ–∂ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞–º–∏</li>
            </ul>
            
            <div class="formula">
                –î–æ—Å—Ç—É–ø–Ω–∏–π –ª—ñ–º—ñ—Ç = –ó–∞–≥–∞–ª—å–Ω–∏–π –ª—ñ–º—ñ—Ç - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π –ª—ñ–º—ñ—Ç
            </div>
        </div>

        <div class="section">
            <h2>üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–æ–∑–ø–æ–¥—ñ–ª—É</h2>
            <div class="algorithm-steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>–ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–∏—Ö</h3>
                    <p>–í–∏–±–∏—Ä–∞—î–º–æ –∞–∫—Ç–∏–≤–Ω–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤ —Ç–∞ —Ä–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ –¥–æ—Å—Ç—É–ø–Ω—ñ –ª—ñ–º—ñ—Ç–∏</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3>–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è</h3>
                    <p>–°–æ—Ä—Ç—É—î–º–æ –∫–ª—ñ—î–Ω—Ç—ñ–≤ –∑–∞ –¥–æ—Å—Ç—É–ø–Ω–∏–º –ª—ñ–º—ñ—Ç–æ–º (–≤—ñ–¥ –±—ñ–ª—å—à–æ–≥–æ –¥–æ –º–µ–Ω—à–æ–≥–æ)</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3>Round-Robin</h3>
                    <p>–†–æ–∑–ø–æ–¥—ñ–ª—è—î–º–æ –∫–ª—ñ—î–Ω—Ç—ñ–≤ —Ü–∏–∫–ª—ñ—á–Ω–æ –º—ñ–∂ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞–º–∏</p>
                </div>
                <div class="step">
                    <div class="step-number">4</div>
                    <h3>–û–±–º–µ–∂–µ–Ω–Ω—è</h3>
                    <p>–ó–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ –ª—ñ–º—ñ—Ç 20 –¥–∑–≤—ñ–Ω–∫—ñ–≤ –Ω–∞ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üìä –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è</h2>
            <div class="interactive-demo">
                <h3>–ü—Ä–∏–∫–ª–∞–¥ —Ä–æ–∑–ø–æ–¥—ñ–ª—É</h3>
                <div class="demo-controls">
                    <button class="demo-button" onclick="generateData()">–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ</button>
                    <button class="demo-button" onclick="distributeClients()">–†–æ–∑–ø–æ–¥—ñ–ª–∏—Ç–∏ –∫–ª—ñ—î–Ω—Ç—ñ–≤</button>
                    <button class="demo-button" onclick="showBalance()">–ü–æ–∫–∞–∑–∞—Ç–∏ –±–∞–ª–∞–Ω—Å</button>
                </div>
                
                <div id="demo-results">
                    <div class="visualization">
                        <h4>–ö–ª—ñ—î–Ω—Ç–∏ (–ø—Ä–∏–∫–ª–∞–¥)</h4>
                        <table class="client-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>–Ü–º'—è</th>
                                    <th>–í—ñ–∫</th>
                                    <th>–õ—ñ–º—ñ—Ç</th>
                                    <th>–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ</th>
                                    <th>–î–æ—Å—Ç—É–ø–Ω–æ</th>
                                </tr>
                            </thead>
                            <tbody id="client-data">
                                <tr><td>1</td><td>–Ü–≤–∞–Ω –ü.</td><td>35</td><td>50000</td><td>15000</td><td>35000</td></tr>
                                <tr><td>2</td><td>–ú–∞—Ä—ñ—è –ö.</td><td>28</td><td>80000</td><td>20000</td><td>60000</td></tr>
                                <tr><td>3</td><td>–û–ª–µ–≥ –ú.</td><td>42</td><td>30000</td><td>25000</td><td>5000</td></tr>
                                <tr><td>4</td><td>–ê–Ω–Ω–∞ –õ.</td><td>31</td><td>45000</td><td>10000</td><td>35000</td></tr>
                                <tr><td>5</td><td>–ü–µ—Ç—Ä–æ –í.</td><td>39</td><td>70000</td><td>30000</td><td>40000</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üíª SQL –ö–æ–¥ (Sybase IQ)</h2>
            <div class="highlight">
                <strong>–£–≤–∞–≥–∞:</strong> –ö–æ–¥ –∞–¥–∞–ø—Ç–æ–≤–∞–Ω–∏–π –¥–ª—è Sybase IQ –±–µ–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è CTE —Ç–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
            </div>
            
            <div class="code-block">
<br>-- –ö—Ä–æ–∫ 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–∏—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤
<br>SELECT 
<br>    client_id,
<br>    client_name,
<br>    age,
<br>    credit_limit,
<br>    used_limit,
<br>    (credit_limit - used_limit) AS available_limit,
<br>    phone_number
<br>INTO #client_data
<br>FROM clients
<br>WHERE active = 1 
<br>  AND (credit_limit - used_limit) > 0;
<br>
<br>-- –ö—Ä–æ–∫ 2: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–∏—Ö —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤
<br>SELECT 
<br>    employee_id,
<br>    employee_name,
<br>    ROW_NUMBER() OVER (ORDER BY employee_id) AS emp_rank
<br>INTO #employees
<br>FROM employees
<br>WHERE active = 1;
<br>
<br>-- –ö—Ä–æ–∫ 3: –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—ñ–≤
<br>SELECT 
    *,
    ROW_NUMBER() OVER (ORDER BY available_limit DESC, client_id) AS client_rank
<br>INTO #sorted_clients
<br>FROM #client_data;
<br>
<br>-- –ö—Ä–æ–∫ 4: –†–æ–∑–ø–æ–¥—ñ–ª –∫–ª—ñ—î–Ω—Ç—ñ–≤
<br>SELECT 
    sc.client_id,
    sc.client_name,
    sc.available_limit,
    sc.phone_number,
    -- Round-robin —Ä–æ–∑–ø–æ–¥—ñ–ª
    ((sc.client_rank - 1) % (SELECT COUNT(*) FROM #employees)) + 1 AS assigned_emp_rank
<br>INTO #base_assignment
<br>FROM #sorted_clients sc;
<br>
<br>-- –ö—Ä–æ–∫ 5: –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤
<br>SELECT 
    ba.*,
    e.employee_id,
    e.employee_name,
    ROW_NUMBER() OVER (PARTITION BY e.employee_id ORDER BY ba.available_limit DESC) AS call_number
<br>INTO #final_assignment
<br>FROM #base_assignment ba
<br>JOIN #employees e ON e.emp_rank = ba.assigned_emp_rank;
<br>
<br>-- –ö—Ä–æ–∫ 6: –§—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
<br>SELECT 
    employee_id,
    employee_name,
    client_id,
    client_name,
    available_limit,
    phone_number,
    call_number
<br>FROM #final_assignment
<br>WHERE call_number <= 20
<br>ORDER BY employee_id, call_number;
            </div>
        </div>

        <div class="section">
            <h2>üìà –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ä–æ–∑–ø–æ–¥—ñ–ª—É</h2>
            <div id="balance-chart" class="chart-container">
                <canvas id="balanceCanvas" width="400" height="200"></canvas>
            </div>
            
            <div class="visualization">
                <h4>–ë–∞–ª–∞–Ω—Å —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫—ñ–≤</h4>
                <table class="employee-table">
                    <thead>
                        <tr>
                            <th>–°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫</th>
                            <th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥–∑–≤—ñ–Ω–∫—ñ–≤</th>
                            <th>–ó–∞–≥–∞–ª—å–Ω–∏–π –ª—ñ–º—ñ—Ç</th>
                            <th>–°–µ—Ä–µ–¥–Ω—ñ–π –ª—ñ–º—ñ—Ç</th>
                            <th>–ë–∞–ª–∞–Ω—Å</th>
                        </tr>
                    </thead>
                    <tbody id="balance-data">
                        <tr>
                            <td>–°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫ 1</td>
                            <td>20</td>
                            <td>175000</td>
                            <td>8750</td>
                            <td><div class="balance-bar">–ó–±–∞–ª–∞–Ω—Å–æ–≤–∞–Ω–æ</div></td>
                        </tr>
                        <tr>
                            <td>–°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫ 2</td>
                            <td>20</td>
                            <td>180000</td>
                            <td>9000</td>
                            <td><div class="balance-bar">–ó–±–∞–ª–∞–Ω—Å–æ–≤–∞–Ω–æ</div></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="section">
            <h2>üéØ –ö–ª—é—á–æ–≤—ñ –ø–µ—Ä–µ–≤–∞–≥–∏</h2>
            <div class="algorithm-steps">
                <div class="step">
                    <div class="step-number">‚úÖ</div>
                    <h3>–ü—Ä–æ—Å—Ç–æ—Ç–∞</h3>
                    <p>–ë–µ–∑ —Å–∫–ª–∞–¥–Ω–∏—Ö CTE —Ç–∞ —Ä–µ–∫—É—Ä—Å—ñ—ó</p>
                </div>
                <div class="step">
                    <div class="step-number">‚ö°</div>
                    <h3>–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å</h3>
                    <p>–û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–æ –¥–ª—è Sybase IQ</p>
                </div>
                <div class="step">
                    <div class="step-number">‚öñÔ∏è</div>
                    <h3>–ó–±–∞–ª–∞–Ω—Å–æ–≤–∞–Ω—ñ—Å—Ç—å</h3>
                    <p>–†—ñ–≤–Ω–æ–º—ñ—Ä–Ω–∏–π —Ä–æ–∑–ø–æ–¥—ñ–ª –ª—ñ–º—ñ—Ç—ñ–≤</p>
                </div>
                <div class="step">
                    <div class="step-number">üîß</div>
                    <h3>–ì–Ω—É—á–∫—ñ—Å—Ç—å</h3>
                    <p>–õ–µ–≥–∫–æ –∞–¥–∞–ø—Ç—É—î—Ç—å—Å—è –ø—ñ–¥ –ø–æ—Ç—Ä–µ–±–∏</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω—ñ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó
        let clients = [
            {id: 1, name: '–Ü–≤–∞–Ω –ü.', age: 35, limit: 50000, used: 15000, available: 35000},
            {id: 2, name: '–ú–∞—Ä—ñ—è –ö.', age: 28, limit: 80000, used: 20000, available: 60000},
            {id: 3, name: '–û–ª–µ–≥ –ú.', age: 42, limit: 30000, used: 25000, available: 5000},
            {id: 4, name: '–ê–Ω–Ω–∞ –õ.', age: 31, limit: 45000, used: 10000, available: 35000},
            {id: 5, name: '–ü–µ—Ç—Ä–æ –í.', age: 39, limit: 70000, used: 30000, available: 40000},
            {id: 6, name: '–°–≤—ñ—Ç–ª–∞–Ω–∞ –†.', age: 45, limit: 60000, used: 15000, available: 45000},
            {id: 7, name: '–ê–Ω–¥—Ä—ñ–π –°.', age: 33, limit: 40000, used: 20000, available: 20000},
            {id: 8, name: '–û–ª—å–≥–∞ –¢.', age: 29, limit: 35000, used: 10000, available: 25000}
        ];

        let employees = [
            {id: 1, name: '–°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫ 1'},
            {id: 2, name: '–°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫ 2'},
            {id: 3, name: '–°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫ 3'}
        ];

        let assignments = [];

        function generateData() {
            // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö
            clients.forEach(client => {
                client.limit = Math.floor(Math.random() * 80000) + 20000;
                client.used = Math.floor(Math.random() * client.limit * 0.7);
                client.available = client.limit - client.used;
            });
            
            updateClientTable();
        }

        function updateClientTable() {
            const tbody = document.getElementById('client-data');
            tbody.innerHTML = '';
            
            clients.forEach(client => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${client.id}</td>
                    <td>${client.name}</td>
                    <td>${client.age}</td>
                    <td>${client.limit.toLocaleString()}</td>
                    <td>${client.used.toLocaleString()}</td>
                    <td><strong>${client.available.toLocaleString()}</strong></td>
                `;
            });
        }

        function distributeClients() {
            // –°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—ñ–≤ –∑–∞ –¥–æ—Å—Ç—É–ø–Ω–∏–º –ª—ñ–º—ñ—Ç–æ–º
            const sortedClients = [...clients].sort((a, b) => b.available - a.available);
            
            // –†–æ–∑–ø–æ–¥—ñ–ª –º—ñ–∂ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞–º–∏
            assignments = [];
            sortedClients.forEach((client, index) => {
                const empIndex = index % employees.length;
                assignments.push({
                    ...client,
                    employeeId: employees[empIndex].id,
                    employeeName: employees[empIndex].name
                });
            });
            
            showDistributionResults();
        }

        function showDistributionResults() {
            const resultDiv = document.getElementById('demo-results');
            
            let html = '<div class="visualization"><h4>–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ä–æ–∑–ø–æ–¥—ñ–ª—É</h4>';
            
            employees.forEach(emp => {
                const empAssignments = assignments.filter(a => a.employeeId === emp.id);
                const totalLimit = empAssignments.reduce((sum, a) => sum + a.available, 0);
                
                html += `
                    <h5>${emp.name} (${empAssignments.length} –¥–∑–≤—ñ–Ω–∫—ñ–≤, ${totalLimit.toLocaleString()} –ª—ñ–º—ñ—Ç—ñ–≤)</h5>
                    <table class="client-table" style="margin-bottom: 20px;">
                        <thead>
                            <tr><th>–ö–ª—ñ—î–Ω—Ç</th><th>–î–æ—Å—Ç—É–ø–Ω–∏–π –ª—ñ–º—ñ—Ç</th><th>–¢–µ–ª–µ—Ñ–æ–Ω</th></tr>
                        </thead>
                        <tbody>
                `;
                
                empAssignments.forEach(assignment => {
                    html += `
                        <tr>
                            <td>${assignment.name}</td>
                            <td>${assignment.available.toLocaleString()}</td>
                            <td>+380XX XXX XXXX</td>
                        </tr>
                    `;
                });
                
                html += '</tbody></table>';
            });
            
            html += '</div>';
            resultDiv.innerHTML = html;
        }

        function showBalance() {
            const balanceData = employees.map(emp => {
                const empAssignments = assignments.filter(a => a.employeeId === emp.id);
                const totalLimit = empAssignments.reduce((sum, a) => sum + a.available, 0);
                const avgLimit = empAssignments.length > 0 ? totalLimit / empAssignments.length : 0;
                
                return {
                    name: emp.name,
                    calls: empAssignments.length,
                    totalLimit: totalLimit,
                    avgLimit: avgLimit
                };
            });
            
            // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ –±–∞–ª–∞–Ω—Å—É
            const tbody = document.getElementById('balance-data');
            tbody.innerHTML = '';
            
            balanceData.forEach(emp => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${emp.name}</td>
                    <td>${emp.calls}</td>
                    <td>${emp.totalLimit.toLocaleString()}</td>
                    <td>${Math.round(emp.avgLimit).toLocaleString()}</td>
                    <td><div class="balance-bar">–ó–±–∞–ª–∞–Ω—Å–æ–≤–∞–Ω–æ</div></td>
                `;
            });
            
            // –ú–∞–ª—é–≤–∞–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫–∞
            drawBalanceChart(balanceData);
        }

        function drawBalanceChart(data) {
            const canvas = document.getElementById('balanceCanvas');
            const ctx = canvas.getContext('2d');
            
            // –û—á–∏—â–µ–Ω–Ω—è canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
            const barWidth = 80;
            const barSpacing = 50;
            const maxValue = Math.max(...data.map(d => d.totalLimit));
            const scale = (canvas.height - 60) / maxValue;
            
            // –ú–∞–ª—é–≤–∞–Ω–Ω—è —Å—Ç–æ–≤–ø—á–∏–∫—ñ–≤
            data.forEach((emp, index) => {
                const x = 50 + index * (barWidth + barSpacing);
                const barHeight = emp.totalLimit * scale;
                const y = canvas.height - barHeight - 30;
                
                // –ì—Ä–∞–¥—ñ—î–Ω—Ç
                const gradient = ctx.createLinearGradient(0, y, 0, y + barHeight);
                gradient.addColorStop(0, '#667eea');
                gradient.addColorStop(1, '#764ba2');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(x, y, barWidth, barHeight);
                
                // –ü—ñ–¥–ø–∏—Å–∏
                ctx.fillStyle = '#2c3e50';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText(emp.name, x + barWidth/2, canvas.height - 5);
                ctx.fillText(emp.totalLimit.toLocaleString(), x + barWidth/2, y - 5);
            });
        }

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        document.addEventListener('DOMContentLoaded', function() {
            updateClientTable();
            showBalance();
        });
    </script>
</body>
</html>
